"use strict";(self.webpackChunkwayang_website=self.webpackChunkwayang_website||[]).push([[979],{8653:(a,e,n)=>{n.r(e),n.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>g,frontMatter:()=>t,metadata:()=>p,toc:()=>c});var o=n(5893),r=n(1151);const t={title:"Adding an operator in Wayang",sidebar_position:7,id:"adding-operators"},i="Adding new operators in Wayang",p={id:"guide/adding-operators",title:"Adding an operator in Wayang",description:"\x3c!--",source:"@site/docs/guide/add-an-operator.md",sourceDirName:"guide",slug:"/guide/adding-operators",permalink:"/docs/guide/adding-operators",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{title:"Adding an operator in Wayang",sidebar_position:7,id:"adding-operators"},sidebar:"guideSidebar",previous:{title:"Developing in Wayang",permalink:"/docs/guide/developing-in-wayang"},next:{title:"Data processing optimizer",permalink:"/docs/guide/optimizer"}},s={},c=[{value:"Step 1: Add a Wayang operator",id:"step-1-add-a-wayang-operator",level:2},{value:"Step 2: Add the (platform-specific) execution operators",id:"step-2-add-the-platform-specific-execution-operators",level:2},{value:"Step 3: Add mappings",id:"step-3-add-mappings",level:2}];function d(a){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",p:"p",...(0,r.a)(),...a.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h1,{id:"adding-new-operators-in-wayang",children:"Adding new operators in Wayang"}),"\n",(0,o.jsxs)(e.p,{children:["This guide shows the ",(0,o.jsx)(e.em,{children:"3 steps"})," that developers need to follow if they want to add new operators in Wayang.\nWe use the Map operator as an example."]}),"\n",(0,o.jsx)(e.h2,{id:"step-1-add-a-wayang-operator",children:"Step 1: Add a Wayang operator"}),"\n",(0,o.jsxs)(e.p,{children:["Wayang operators are located under the ",(0,o.jsx)(e.code,{children:"wayang-basic"})," in the ",(0,o.jsx)(e.code,{children:"org.apache.wayang.basic.operators"})," package."]}),"\n",(0,o.jsxs)(e.p,{children:["An operator needs to extend from one of the following abstract classes: ",(0,o.jsx)(e.code,{children:"UnaryToUnaryOperator"}),", ",(0,o.jsx)(e.code,{children:"BinaryToUnaryOperator"}),", ",(0,o.jsx)(e.code,{children:"UnarySource"}),", ",(0,o.jsx)(e.code,{children:"UnarySink"}),"."]}),"\n",(0,o.jsxs)(e.p,{children:["For a unary to unary operator, see for example here:\n",(0,o.jsx)(e.a,{href:"https://github.com/apache/incubator-wayang/blob/main/wayang-commons/wayang-basic/src/main/java/org/apache/wayang/basic/operators/MapOperator.java",children:"https://github.com/apache/incubator-wayang/blob/main/wayang-commons/wayang-basic/src/main/java/org/apache/wayang/basic/operators/MapOperator.java"})]}),"\n",(0,o.jsx)(e.p,{children:"For enhanced performance in Wayang, consider adding a cardinality estimator as well."}),"\n",(0,o.jsx)(e.h2,{id:"step-2-add-the-platform-specific-execution-operators",children:"Step 2: Add the (platform-specific) execution operators"}),"\n",(0,o.jsxs)(e.p,{children:["Execution operators are located under the corresponding module of ",(0,o.jsx)(e.code,{children:"wayang-platforms"}),". For instance, Java execution operators are located in the ",(0,o.jsx)(e.code,{children:"org.apache.wayang.java.operators"})," package of the ",(0,o.jsx)(e.code,{children:"wayang-java"})," module."]}),"\n",(0,o.jsx)(e.p,{children:"An execution operator needs to extend from its corresponding Wayang operator and implement the corresponding platform operator interface."}),"\n",(0,o.jsxs)(e.p,{children:["For the above ",(0,o.jsx)(e.code,{children:"MapOperator"}),", the following is the corresponding ",(0,o.jsx)(e.code,{children:"JavaMapOperator"}),":\n",(0,o.jsx)(e.a,{href:"https://github.com/apache/incubator-wayang/blob/main/wayang-platforms/wayang-java/src/main/java/org/apache/wayang/java/operators/JavaMapOperator.java",children:"https://github.com/apache/incubator-wayang/blob/main/wayang-platforms/wayang-java/src/main/java/org/apache/wayang/java/operators/JavaMapOperator.java"})]}),"\n",(0,o.jsx)(e.p,{children:"For enhanced performance in Wayang, consider adding a load function as well."}),"\n",(0,o.jsx)(e.h2,{id:"step-3-add-mappings",children:"Step 3: Add mappings"}),"\n",(0,o.jsxs)(e.p,{children:["Create mappings from the Wayang operator to the platform-specific execution operators. The mappings are located in the corresponding execution module in the ",(0,o.jsx)(e.code,{children:"org.apache.wayang.java.operators"})," package."]}),"\n",(0,o.jsxs)(e.p,{children:["For the above ",(0,o.jsx)(e.code,{children:"MapOperator"})," and ",(0,o.jsx)(e.code,{children:"JavaMapOperator"}),", see here:\n",(0,o.jsx)(e.a,{href:"https://github.com/apache/incubator-wayang/blob/main/wayang-platforms/wayang-java/src/main/java/org/apache/wayang/java/mapping/MapMapping.java",children:"https://github.com/apache/incubator-wayang/blob/main/wayang-platforms/wayang-java/src/main/java/org/apache/wayang/java/mapping/MapMapping.java"})]}),"\n",(0,o.jsxs)(e.p,{children:["After that you need to declare this mapping in the Wayang in the corresponding ",(0,o.jsx)(e.code,{children:"Mappings"})," class:\n",(0,o.jsx)(e.a,{href:"https://github.com/apache/incubator-wayang/blob/main/wayang-platforms/wayang-java/src/main/java/org/apache/wayang/java/mapping/Mappings.java#L37",children:"https://github.com/apache/incubator-wayang/blob/main/wayang-platforms/wayang-java/src/main/java/org/apache/wayang/java/mapping/Mappings.java#L37"})]})]})}function g(a={}){const{wrapper:e}={...(0,r.a)(),...a.components};return e?(0,o.jsx)(e,{...a,children:(0,o.jsx)(d,{...a})}):d(a)}},1151:(a,e,n)=>{n.d(e,{Z:()=>p,a:()=>i});var o=n(7294);const r={},t=o.createContext(r);function i(a){const e=o.useContext(t);return o.useMemo((function(){return"function"==typeof a?a(e):{...e,...a}}),[e,a])}function p(a){let e;return e=a.disableParentContext?"function"==typeof a.components?a.components(r):a.components||r:i(a.components),o.createElement(t.Provider,{value:e},a.children)}}}]);